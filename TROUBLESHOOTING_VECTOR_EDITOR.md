# 🚨 向量编辑器使用说明

## 问题：为什么看不到向量编辑器？

如果你点击"Load from Preset"后没有看到向量编辑界面，请按照以下步骤操作：

---

## ✅ 正确使用步骤

### 第1步：找到正确的面板
1. 在Blender中，按 `N` 键打开侧边栏
2. 找到 **"My Addon"** 标签页
3. 向下滚动找到 **"Geometry Vectors (Latent Space)"** 面板
4. 如果面板是折叠的，点击面板标题展开它

### 第2步：展开Vector Editor
面板展开后，你会看到：
```
┌─────────────────────────────────────┐
│ Geometry Vectors (Latent Space)    │  ← 面板标题
├─────────────────────────────────────┤
│ ⊞ Unified Vector Representation    │
├─────────────────────────────────────┤
│ ▶ Vector Editor                     │  ← 点击这里的箭头展开！
├─────────────────────────────────────┤
│ ⊞ Encoding                          │
│ ...                                 │
└─────────────────────────────────────┘
```

**重要**: 点击 **"▶ Vector Editor"** 左侧的箭头图标来展开编辑器！

### 第3步：加载向量
展开Vector Editor后，你会看到：
```
┌─────────────────────────────────────┐
│ ▼ Vector Editor                     │  ← 已展开
│   Load Vector:                      │
│   [From Preset] [From Object]       │  ← 点击这些按钮
└─────────────────────────────────────┘
```

点击 **[From Preset]** 按钮，会弹出对话框：
```
┌──────────────────────┐
│ Load from Preset     │
│ Preset: [选择框 ▼]  │  ← 选择STAIRCASE
│ [   OK   ] [Cancel]  │
└──────────────────────┘
```

### 第4步：查看和编辑向量
选择预设并点击OK后，向量编辑器会**自动展开**并显示：

```
┌─────────────────────────────────────┐
│ ▼ Vector Editor                     │
│   ─────────────────────────────────│
│   Vector Values (32D):              │
│   ┌─────────────────────────────┐  │
│   │ Shape & Topology [0-7]:     │  │
│   │ [0]: 0.70  [1]: 0.40        │  │ ← 可以编辑！
│   │ [2]: 2.00  [3]: 3.00        │  │
│   │ [4]: 2.00  [5]: 0.50        │  │
│   │ [6]: 0.00  [7]: 0.00        │  │
│   └─────────────────────────────┘  │
│   ┌─────────────────────────────┐  │
│   │ Aspect & Deformation [8-14]:│  │
│   │ [8]: 0.00  [9]: 0.00        │  │
│   │ ...                         │  │
│   └─────────────────────────────┘  │
│   ─────────────────────────────────│
│   Vector Operations:                │
│   [Copy] [Paste]                    │  ← 操作按钮
│   [Reset] [Normalize]               │
│   ─────────────────────────────────│
│   Vector Arithmetic:                │
│   Operation: [ Add ▼ ]              │  ← 运算选择
│   [Apply Operation]                 │
│   ─────────────────────────────────│
│   ╔═══════════════════════════╗    │
│   ║ Decode & Render          ║    │  ← 渲染按钮
│   ╚═══════════════════════════╝    │
└─────────────────────────────────────┘
```

---

## 🎯 完整操作流程（以STAIRCASE为例）

### 步骤 1：准备
```
1. 打开Blender
2. 按 N 键打开侧边栏
3. 点击 "My Addon" 标签
4. 找到 "Geometry Vectors (Latent Space)" 面板
```

### 步骤 2：展开面板
```
5. 点击 "Geometry Vectors (Latent Space)" 展开面板（如果它是折叠的）
6. 点击 "▶ Vector Editor" 左侧的箭头，展开向量编辑器
```

### 步骤 3：加载STAIRCASE向量
```
7. 点击 [From Preset] 按钮
8. 在弹出对话框中选择 "STAIRCASE"
9. 点击 OK
```

**结果**: 向量编辑器自动展开，显示32个参数！

### 步骤 4：查看向量值
```
STAIRCASE的向量示例：
[0] = 0.7   (Shape Type)
[1] = 0.4   (Complexity)
[2] = 2.0   (Scale X)
[3] = 3.0   (Scale Y)
[4] = 2.0   (Scale Z)
...
```

### 步骤 5：编辑向量（可选）
```
10. 修改任意参数，例如：
    - 改 [2] 从 2.0 → 5.0 (增大X方向尺寸)
    - 改 [12] 从 0.0 → 0.5 (增加扭曲)
```

### 步骤 6：解码并渲染
```
11. 向下滚动到底部
12. 点击大的 [Decode & Render] 按钮
13. 在3D视口中查看生成的楼梯模型
```

---

## 🐛 故障排除

### 问题1: 看不到"Geometry Vectors"面板
**解决方案**:
- 确保插件已启用
- 重新加载脚本：在Blender中按 `Alt+R`
- 检查是否在正确的工作区（3D视口）

### 问题2: Vector Editor是折叠的
**解决方案**:
- 手动点击 "▶ Vector Editor" 左侧的箭头
- 或者加载向量后会自动展开

### 问题3: 点击From Preset没反应
**解决方案**:
- 检查Blender控制台是否有错误信息
- 确保 `geometry_encoder.py` 文件存在
- 尝试重新加载插件

### 问题4: 看不到32个参数
**解决方案**:
- 确保 Vector Editor 已完全展开
- 向下滚动面板查看所有参数组
- 检查属性是否正确注册

### 问题5: Decode按钮不工作
**解决方案**:
- 先确保已加载向量
- 检查向量值是否在合理范围内
- 场景中最好有基础对象

---

## 📸 界面截图说明

**折叠状态** (初始):
```
▶ Vector Editor            ← 点击箭头展开
```

**展开状态** (可以编辑):
```
▼ Vector Editor            ← 已展开
  Load Vector:
  [From Preset] [From Object]
  
  Vector Values (32D):
  ┌─ Shape & Topology [0-7] ─┐
  │ [0]: [   ]  [1]: [   ]   │
  │ ...                       │
  └───────────────────────────┘
  
  ... (更多参数组) ...
  
  [Decode & Render]          ← 大按钮
```

---

## 💡 快速提示

1. **第一次使用**: 展开Vector Editor需要**手动点击箭头**
2. **自动展开**: 加载向量后会自动展开编辑器
3. **参数分组**: 32个参数分为5组，便于查看
4. **实时编辑**: 修改任意参数后点击Decode即可看到效果
5. **保存状态**: 使用Copy按钮保存当前向量

---

## 🎓 示例：编辑STAIRCASE

```python
# 1. 加载STAIRCASE向量
From Preset → STAIRCASE → OK

# 2. 查看初始值
[0] = 0.7   # Shape Type
[2-4] = [2.0, 3.0, 2.0]  # 尺寸

# 3. 修改参数
[2] = 5.0   # 增大X尺寸
[12] = 0.3  # 添加轻微扭曲

# 4. 点击 Decode & Render

# 5. 结果：看到一个更宽、略微扭曲的楼梯
```

---

## 📋 检查清单

在报告问题前，请确认：
- [ ] 已找到"Geometry Vectors (Latent Space)"面板
- [ ] 已展开面板（不是折叠状态）
- [ ] 已点击"▶ Vector Editor"左侧的箭头展开编辑器
- [ ] 已点击"From Preset"按钮
- [ ] 在对话框中选择了预设（如STAIRCASE）
- [ ] 已点击OK确认
- [ ] 向量编辑器现在显示32个参数
- [ ] 可以看到[Copy] [Paste] 等按钮
- [ ] 可以看到[Decode & Render]按钮

如果以上都确认但仍有问题，请提供：
1. Blender版本
2. 控制台错误信息（如有）
3. 面板的截图

---

**最后更新**: 2026-02-08  
**版本**: 1.1 (添加自动展开功能)
